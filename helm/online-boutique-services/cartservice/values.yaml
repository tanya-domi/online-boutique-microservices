deploymentName: cartservice-deployment
serviceName: cartservice
appLabel: cartservice
appName: cartservice
serviceAccountName: cartservice

replicaCount: 1

image:
  repository: online-boutique/cartservice
  tag: "8087539b"
  pullPolicy: IfNotPresent
  imagePullSecrets:
    - name: my-registry-key

terminationGracePeriodSeconds: 5

securityContext:
  fsGroup: 1000
  runAsGroup: 1000
  runAsNonRoot: true
  runAsUser: 1000

containers:
  - name: server
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - ALL
      privileged: false
      readOnlyRootFilesystem: true
    ports:
      - containerPort: 7070
    env:
      - name: REDIS_ADDR
        value: "redis-cart:6379"
    readinessProbe:
      initialDelaySeconds: 15
      grpc:
        port: 7070
    livenessProbe:
      initialDelaySeconds: 15
      periodSeconds: 10
      grpc:
        port: 7070
    resources:
      requests:
        cpu: 200m
        memory: 64Mi
      limits:
        cpu: 300m
        memory: 128Mi

service:
  type: ClusterIP
  ports:
    - name: grpc
      port: 7070
      targetPort: 7070

createServiceAccount: true
profiler_enabled:  false

--- 
deploymentName: redis-cart-deployment
serviceName: redis-cart
appLabel: redis-cart
appName: redis-cart

securityContext:
  fsGroup: 1000
  runAsGroup: 1000
  runAsNonRoot: true
  runAsUser: 1000

containers:
  - name: redis
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - ALL
      privileged: false
      readOnlyRootFilesystem: true
    image: redis:alpine
    ports:
      - containerPort: 6379
    readinessProbe:
      periodSeconds: 5
      tcpSocket:
        port: 6379
    livenessProbe:
      periodSeconds: 5
      tcpSocket:
        port: 6379
    volumeMounts:
      - mountPath: /data
        name: redis-data
    resources:
      requests:
        cpu: 70m
        memory: 200Mi
      limits:
        cpu: 125m
        memory: 256Mi

volumes:
  - name: redis-data
    emptyDir: {}

service:
  type: ClusterIP
  ports:
    - name: tcp-redis
      port: 6379
      targetPort: 6379








